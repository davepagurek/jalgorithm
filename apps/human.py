import pydiffvg
import diffvg
import torch
import skimage
import numpy as np

# Use GPU if available
pydiffvg.set_use_gpu(torch.cuda.is_available())

def blend(src, dst):
    src_a = torch.flatten(img)[3::4]
    src_a_full = torch.reshape(src_a.repeat_interleave(4), src.size())
    return src + dst * (torch.ones_like(dst) - src_a_full)

canvas_width, canvas_height = 256, 256
# shapes = pydiffvg.from_svg_path('M149.351 18.5529C144.251 22.6329 148.65 31.468 154.3 32.0958C153.471 33.7537 142.088 39.9089 131.381 36.7837C126.264 36.7837 121.578 36.873 117.549 40.1694C115.51 41.8377 113.486 43.2524 111.703 45.2335C110.793 46.2453 110.464 47.6323 109.678 48.5613C107.275 51.4007 105.768 54.3292 102.964 56.8375C98.7234 60.6318 92.5674 62.7302 87.3667 64.8822C84.144 66.2158 80.9105 67.5314 77.7304 68.9625C71.6913 71.6801 65.5461 73.721 60.4256 77.8174C58.0787 79.695 55.13 81.5828 52.4967 83.3735C49.9058 85.1353 45.711 88.2526 44.3941 91.2156C42.5812 95.2947 39.186 98.7327 37.6516 103.08C36.856 105.334 34.6512 107.644 33.5714 109.938C32.3976 112.433 31.9344 115.324 30.8223 117.896C29.185 121.682 28.4937 125.665 27.0893 129.5C26.1076 132.181 24.7369 134.781 24.0798 137.574C23.2443 141.125 21.2809 144.699 18.7552 147.326C16.9636 149.189 15.1597 152.159 17.8292 153.345C19.1414 153.928 20.8634 153.464 22.2856 153.982C23.4528 154.406 24.5247 154.667 25.5267 153.866C29.3966 150.77 33.9765 148.361 33.9765 142.783C33.9765 140.584 33.9109 138.455 34.4684 136.503C35.092 134.321 36.2115 132.181 37.1596 130.166C38.3116 127.718 39.9021 124.077 41.5582 121.948C43.1703 119.875 45.1689 117.822 46.3619 115.437C48.8085 110.543 52.7523 106.162 56.3162 102.203L56.4901 102.009C57.6743 100.694 58.3793 98.8666 59.4996 97.4662C60.8267 95.8073 62.6977 94.4405 64.0718 92.7493C65.9466 90.4418 68.6621 88.7348 70.1776 86.0068C71.0794 84.3837 73.0072 82.1355 74.3447 80.798C75.7232 79.4195 78.1265 75.5741 80.3348 75.3288C81.7609 75.1703 91.2294 71.1654 88.7846 73.8819C87.2089 75.6327 86.1575 77.774 84.2414 79.2643C81.8857 81.0965 81.3012 86.3664 80.8846 89.0742C80.4101 92.1584 80.1675 95.2161 79.785 98.2764C79.3144 102.041 78.46 108.144 76.052 111.154C74.5937 112.977 74.2514 114.941 72.5216 116.478C70.9867 117.843 69.2579 118.777 67.7179 120.009C64.294 122.748 66.3817 126.544 69.1359 129.298C70.9119 131.074 71.9959 134.289 73.8238 135.751C75.3178 136.946 73.8924 139.764 75.3864 140.96C76.8776 142.153 78.5737 144.358 79.8139 145.908C80.9778 147.363 85.6333 147.621 87.5438 147.726L87.6271 147.731C93.1264 148.037 97.6756 150.745 102.993 151.927C106.075 152.612 109.531 152.665 112.369 154.242C115.509 155.987 117.366 160.025 120.095 162.374C123.808 165.568 125.106 170.611 128.429 174.18C130.703 176.622 132.152 177.431 135.027 178.868C137.766 180.237 139.882 182.109 142.088 184.251C144.657 186.744 145.666 190.541 147.818 193.308C149.832 195.898 151.865 198.412 154.531 200.108C157.04 201.705 159.245 204.113 161.824 205.52C166.362 207.995 169.306 213.234 173.572 216.256C176.795 218.539 179.797 221.069 182.948 223.49C185.201 225.221 186.095 227.447 187.896 229.249C188.7 230.052 190.098 230.9 190.24 232.114C190.361 233.135 191.087 233.968 191.311 234.978C191.501 235.832 191.698 237.335 192.208 237.959C194.295 240.51 198.699 243.171 202.221 241.605C203.224 241.159 204.078 241.121 204.825 240.187C205.353 239.527 208.046 241.308 208.732 241.461C211.126 241.993 213.785 242.699 215.995 243.804C217.963 244.788 220.129 246.713 222.275 247.19C224.449 247.673 226.232 249.209 228.67 249.303C232.613 249.454 236.586 249.303 240.534 249.303C242.864 249.303 246.045 249.915 248.29 249.274C251.483 248.361 249.485 246.118 247.277 245.628C244.555 245.023 241.839 243.419 239.174 242.531C230.597 239.672 222.582 236.188 214.432 232.114C209.928 229.862 204.154 224.89 199.038 224.185C195.032 223.632 192.32 222.053 189.43 219.323C187.276 217.289 184.756 215.965 182.774 213.622C180.513 210.949 178.967 207.444 176.466 204.796C172.815 200.93 169.416 197.377 165.499 193.8C163.807 192.255 161.81 190.958 160.348 189.17C156.76 184.785 155.657 179.059 152.708 174.267C151.477 172.267 132.944 166.133 126.897 157.823C120.85 149.513 117.295 147.99 114.713 145.011C111.374 141.158 106.693 137.559 102.212 135.114C101.49 134.721 99.6652 133.32 99.6652 132.394C99.6652 131.946 101.997 131.476 102.328 131.179C104.392 129.32 104.262 129.45 102.328 127.301C100.987 125.811 99.3605 124.244 97.7843 123.018C96.3061 121.869 94.394 120.641 93.0964 119.343C91.2447 117.491 91.66 115.255 92.2861 113.064C93.0551 110.372 93.3568 108.194 93.3568 105.279V101.373C93.3568 99.4512 94.4573 99.201 95.3246 97.7266C96.5853 95.5834 101.238 97.7266 103.254 97.7266C105.933 97.7266 108.983 95.808 108.983 99.2893C108.983 103.803 104.459 108.067 105.887 113.064C106.412 114.902 108.444 115.422 109.765 116.478C110.561 117.116 111.189 117.935 112.108 118.446C113.407 119.167 116.535 119.928 117.317 120.906C118.985 122.991 123.345 121.799 125.13 124.031C126.058 125.19 129.92 126.896 131.381 126.896C136.396 126.896 141.636 131.847 145.734 134.188C148.734 135.902 151.201 137.049 153.287 140.178C154.433 141.898 157.004 143.481 158.467 145.127C159.814 146.642 159.577 146.846 161.997 147.557C165.121 148.476 171.809 150.997 174.73 148.368C176.856 146.454 177.605 145.683 175.54 143.159C173.837 141.077 170.213 138.445 167.843 137.198C164.779 135.586 162.312 133.031 158.988 131.844C151.486 129.165 145.627 122.935 138.471 119.632C132.345 116.805 125.127 115.433 120.182 110.488C117.776 108.082 118.714 107.135 118.88 103.977C118.992 101.838 119.288 99.6513 119.401 97.7266C119.462 96.6836 122.369 94.8938 123.018 94.3698C126.638 91.446 130.305 87.879 132.944 84.068C135.204 80.8036 137.03 78.5351 139.715 75.8497C141.979 73.5854 143.326 71.7209 145.155 68.8467C148.595 63.441 147.007 54.4197 147.007 48.243C147.007 45.273 150.145 43.7355 151.985 41.9925C154.959 39.1747 158.265 39.9089 162.287 39.9089C164.693 39.9089 168.363 39.4356 168.363 42.7738C168.363 44.457 172.968 45.1177 174.354 45.1177C177.515 45.1177 188.157 49.622 188.157 43.4394V43.4141C188.157 42.0234 188.157 39.3879 186.334 41.2111C185.052 42.4934 183.424 42.0566 181.964 41.3558C178.321 39.6071 177.831 38.8661 178.26 35.221C178.827 30.405 189.206 37.7261 188.128 32.8771C187.619 30.5858 186.358 29.7855 188.446 27.6972C190.593 25.551 186.617 22.2215 185.032 20.6364C183.373 18.9778 181.843 16.4264 179.562 15.9195C175.339 14.981 171.651 13.3441 167.206 13.3441C165.2 13.3441 163.636 13.2985 161.795 13.865L161.647 13.9105C160.433 14.2845 158.617 14.844 157.425 14.9067C153.661 15.1048 152.045 16.3978 149.419 18.4985L149.351 18.5529Z')
# shapes = pydiffvg.from_svg_path('M168.184 64.343C171.946 65.0655 175.782 66.2078 179.612 66.5017C182.529 65.532 185.09 65.2723 185.09 61.9482C185.09 59.4638 183.872 57.7687 183.872 55.2698C183.872 53.895 187.378 48.9688 188.606 49.6369C189.718 50.242 190.451 52.6011 190.973 53.6845C191.831 55.465 192.455 60.4304 194.963 60.4304C197.934 60.4304 200.948 60.2511 203.821 61.1725C206.36 61.9867 205.782 56.6545 205.782 54.7301C205.782 53.3642 210.145 46.9768 210.617 48.625C211.222 50.7358 212.477 52.0996 212.477 54.6626C212.477 57.1007 213.19 60.1404 213.728 62.5554C215.233 69.3113 221.574 67.8349 226.475 70.2794C231.695 72.8836 236.501 75.8171 240.472 80.7694C243.209 84.1824 250.858 87.7117 245.95 92.6084C245.047 93.5093 244.489 94.6152 243.515 95.6441C242.213 97.0196 241.435 97.6077 239.728 98.6798C237.394 100.146 233.274 97.6206 231.005 96.5211C225.997 94.0944 220.535 92.4117 215.52 89.9101C211.807 88.0583 205.705 85.6658 201.657 88.0212C188.631 95.6014 189.975 111.416 187.051 124.179C185.991 128.804 185.09 134.325 185.09 139.054C185.09 145.663 183.872 152.162 183.872 158.718V172.143C183.872 176.554 183.06 182.047 184.211 186.309C185.087 189.558 187.167 201.289 183.264 203.579C181.588 204.562 169.661 207.667 169.266 204.321C169.115 203.044 168.164 202.491 167.44 201.589C166.475 200.385 166.832 198.825 166.832 197.271C166.832 181.78 169.875 166.586 169.875 151.062L169.875 150.838C169.876 146.381 169.876 145.53 165.276 144.957C162.814 144.65 153.459 142.5 152.09 144.822C149.592 149.059 152.158 155.52 152.225 160.337C152.31 166.419 152.146 172.421 152.699 178.484C153.231 184.33 154.716 189.925 154.66 195.821C154.628 199.168 154.903 207.731 151.955 210.392C150.646 211.574 147.842 211.877 146.207 212.349C141.298 213.763 136.439 214.136 131.33 213.9C126.038 213.655 127.273 211.988 127.273 207.289C127.273 200.049 128.213 192.763 129.504 185.635C132.124 171.176 132.75 157.428 132.75 142.764C132.75 138.892 130.991 139.965 127.577 139.965C121.929 139.965 115.994 139.594 110.502 141.044C101.59 143.398 91.6547 142.884 82.5067 143.743C76.2193 144.333 70.0551 145.226 63.7077 145.395C59.2599 145.514 54.8015 145.429 50.3523 145.429C48.8581 145.429 45.1572 144.711 43.9282 145.733C43.107 146.415 43.9649 148.569 44.2325 149.713C45.7655 156.267 46.6719 162.737 47.2417 169.444C48.6242 185.719 53.873 202.079 52.4486 218.42C52.0638 222.835 47.1826 225.758 43.1167 226.144C41.6249 226.286 39.5938 226.601 38.8903 224.963C37.0988 220.793 37.0173 215.376 35.8473 210.999C31.0841 193.18 31.7224 174.116 31.7224 155.818C31.7224 152.076 30.8878 148.465 26.5493 148.465C23.525 148.465 21.9848 150.119 21.9848 153.052C21.9848 157.863 21.9417 162.677 21.9848 167.488C22.0441 174.116 23.1295 180.666 23.202 187.321C23.24 190.815 23.9145 194.533 24.5544 197.98C25.6714 203.997 26.8536 209.703 26.8536 215.856C26.8536 218.378 23.242 218.388 21.3762 218.285C14.48 217.903 15.2902 210.82 15.2902 205.805C15.2902 198.269 14.073 190.602 14.073 183.071C14.073 174.48 10.9641 165.154 8.93367 156.762C8.08521 153.256 8.59556 149.23 8.59556 145.665C8.59556 141.038 8.44685 136.412 8.89986 131.802C9.75373 123.114 11.6386 114.372 11.6386 105.662C11.6386 101.66 16.4097 98.8551 18.1979 95.6441C19.3722 93.5354 20.9933 90.3967 23.202 89.1006C28.4679 86.0104 32.9278 81.3654 38.7551 79.2515C44.4383 77.1899 49.7001 74.8081 55.593 73.1802C59.7777 72.0242 64.0643 71.7734 68.2384 70.6167C70.3995 70.0179 72.4642 69.0174 74.5949 68.458C86.8372 65.2442 99.1001 62.1102 111.855 61.6447C116.657 61.4694 121.375 60.4981 126.191 60.4304C132.849 60.3368 139.443 60.7708 146.072 61.3748C153.48 62.0499 160.876 62.9395 168.184 64.343Z')
shapes = pydiffvg.from_svg_path('M112.865 27.9317C115.313 22.4252 120.652 19.2198 126.933 19.2198C133.215 19.2198 137.969 27.1723 137.969 29.9645C137.969 34.9138 138.938 40.5791 135.194 44.323C134.168 45.3485 131.902 48.6331 133.613 50.0019C134.384 50.6194 134.337 51.7443 135.355 51.7443H138.84C143.644 51.7443 148.955 51.2998 153.424 52.2928C155.605 52.7775 159.032 52.7854 161.2 52.9059C163.911 53.0565 166.41 53.4867 169.202 53.4867C174.808 53.4867 180.346 55.2291 186.174 55.2291H203.308H210.277C212.224 55.2291 213.694 53.9624 215.472 53.4544C219.321 52.3548 223.324 50.5827 227.411 50.5827C232.284 50.5827 234.466 53.9138 233.187 58.3912C232.921 59.3221 230.518 62.2535 229.863 62.9085C228.455 64.3169 226.434 64.3738 224.959 65.5543C223.524 66.7018 221.004 66.5301 219.28 67.2967C217.356 68.1516 215.13 69.7489 212.891 69.7489C202.568 69.7489 192.192 70.9105 181.786 70.9105C178.82 70.9105 175.779 70.7362 172.816 70.9105C170.66 71.0373 168.134 72.5634 165.718 72.6529C163.211 72.7457 161.261 73.682 158.877 73.8145C156.567 73.9428 154.042 73.5758 151.908 74.5243C147.944 76.2859 144.938 79.6838 144.938 83.9784C144.938 85.8378 143.196 87.5837 143.196 89.4959C143.196 92.0207 142.034 94.3665 142.034 97.0462V112.437C142.034 114.888 142.615 117.004 142.615 119.407C142.615 121.35 142.551 124.694 143.486 126.376C145.211 129.482 143.777 137.022 143.777 140.606C143.777 146.343 144.938 151.688 144.938 157.449C144.938 168.289 143.196 178.772 143.196 189.683C143.196 195.046 142.615 200.21 142.615 205.655V213.495C142.615 215.615 143.777 217.851 143.777 219.884C143.777 225.872 167.192 225.487 158.425 232.5C155.401 234.92 150.328 234.694 146.39 234.694C143.586 234.694 136.139 235.114 135.097 231.468C133.893 227.255 132.741 224.272 132.741 219.465C132.741 216.334 134.207 207.341 132.29 204.945C131.179 203.556 132.161 197.5 132.161 195.814C132.161 192.924 131.58 190.233 131.58 187.392C131.58 181.87 130.045 176.668 129.837 171.259C129.643 166.21 128.095 161.099 128.095 155.997C128.095 151.05 126.933 146.378 126.933 141.477C126.933 139.202 122.984 141.528 122.868 143.51C122.822 144.293 121.454 149.197 120.996 149.769C119.992 151.025 119.474 155.224 119.383 156.868C119.234 159.56 119.383 162.302 119.383 164.999V180.39C119.383 184.195 119.964 188.008 119.964 191.748C119.964 194.841 118.963 199.651 120.254 202.493C122.3 206.993 119.964 214.481 119.964 219.013C119.964 223.632 119.383 228.462 119.383 233.242C119.383 234.79 114.298 234.114 112.994 234.114C110.806 234.114 89.7627 234.592 89.5302 232.5C89.0345 228.039 108.348 220.283 108.348 215.528C108.348 205.642 109.316 195.057 107.219 185.617C106.613 182.892 107.546 180.064 106.735 177.325C105.963 174.72 107.574 171.212 106.477 168.742C104.679 164.698 106.231 159.219 104.412 155.126C102.773 151.439 103.702 145.551 103.702 141.412C103.702 140.274 103.483 135.393 103.702 135.379C104.165 135.348 104.801 133.552 104.863 133.055C105.035 131.685 105.561 128.583 106.154 127.248C108.559 121.836 105.444 114.224 105.444 108.953C105.444 104.075 106.606 99.798 106.606 95.0135C106.606 88.9431 106.668 82.0671 104.734 76.2667C103.974 73.986 102.138 72.16 99.7652 72.0721C90.8451 71.7417 81.8451 72.0721 72.9196 72.0721C60.4645 72.0721 48.3901 71.6714 36.1037 69.7812C32.7602 69.2668 30.0631 67.1703 26.7787 66.2319C25.5708 65.8867 20.9268 63.5976 20.6804 62.489C20.3543 61.0214 20.0783 56.5492 20.7772 55.2291C21.5243 53.8179 27.3079 54.6483 28.7793 54.6483C31.6534 54.6483 33.9745 56.3586 36.2973 58.1008C39.7864 60.7175 45.3599 59.8754 49.3975 59.8754C56.6136 59.8754 63.8666 59.4601 70.9836 59.2946C75.3053 59.1941 79.6996 58.86 84.0838 58.7138C87.0794 58.614 91.633 58.2693 94.409 57.1005C95.9793 56.4393 98.2275 56.736 99.9266 56.3584C100.952 56.1306 101.88 54.9613 102.863 54.6805C105.554 53.9115 108.258 54.461 111.026 54.0352C116.532 53.1882 117.252 48.4101 114.635 44.323C112.019 40.236 111.833 36.8755 111.833 36.0629C111.833 33.5423 111.848 30.2219 112.865 27.9317Z')
# shapes = pydiffvg.from_svg_path('M111.675 44.839C111.675 46.5003 113.848 50.2217 113.848 51.6729C112.875 53.6193 105.792 50.7617 104.053 50.7617H98.1558C96.2218 50.7617 94.7331 50.0552 92.8912 49.8505C89.0582 49.4246 86.3998 44.839 82.1849 44.839C79.0734 44.839 74.0719 42.3755 71.4532 40.7387C69.4151 39.4649 66.7262 38.3802 64.4422 37.5496C62.3284 36.781 60.1538 35.0627 57.8109 34.8161C54.1849 34.4344 50.5436 30.1447 47.3323 28.5391C45.5335 27.6397 43.9023 26.242 42.1183 25.35C41.0046 24.7931 39.79 24.7932 38.6761 24.2363C38.1417 23.9691 37.5678 23.1422 37.0562 22.9961C35.8185 22.6424 34.1164 21.7018 33.1078 20.7941C31.1872 19.0655 30.1172 20.1672 28.4 21.1484C24.5156 23.3681 28.5025 27.2433 28.6532 29.8046C28.7494 31.4411 31.6838 33.2518 32.8547 34.1074C35.2884 35.8858 37.9718 39.4311 40.9541 40.2832C45.1588 41.4845 49.1316 43.6404 53.3562 44.9403C55.431 45.5787 56.8276 46.8717 58.5196 48.256C62.0814 51.1702 66.5007 51.6268 70.5673 53.4952C74.8088 55.444 88.6243 57.5955 83.9566 57.5955C82.3959 57.5955 79.7491 58.4586 78.3124 59.0635C76.321 59.902 74.1045 59.8735 71.9341 59.8735C67.6629 59.8735 63.3593 59.4179 59.1776 59.4179C56.5204 59.4179 53.6094 59.313 50.977 58.937C47.8821 58.4949 45.1402 56.5571 41.9665 56.2288C37.3998 55.7564 32.5554 53.9508 27.9698 53.9508C24.1732 53.9508 21.3114 50.6837 17.2634 52.4828C16.443 52.8475 13.6835 53.7605 13.6187 54.862C13.5371 56.2493 13.5666 58.465 14.7577 59.4179C15.6054 60.096 16.929 62.3469 17.5779 63.4503L17.6178 63.5182C18.4276 64.8949 20.1805 65.4599 21.5662 66.2517C24.6461 68.0116 29.5676 67.1629 33.209 67.1629C37.2147 67.1629 41.0563 66.7073 45.0544 66.7073C48.7355 66.7073 52.2632 68.5297 56.2163 68.5297H71.9341C76.5908 68.5297 81.743 67.9786 86.0574 69.7952C87.9851 70.6069 90.4676 69.3761 92.4356 70.2508C95.5605 71.6396 99.4742 71.888 102.813 72.63C104.694 73.048 106.104 79.9201 106.913 81.7418C107.259 82.5196 107.623 83.2117 108.027 84.0197C108.507 84.9796 108.555 86.343 109.065 87.1582C110.227 89.0175 109.384 92.7671 110.305 94.9538C111.725 98.3256 110.659 104.034 110.659 107.71C110.659 113.746 107.374 119.414 106.559 125.529C106.302 127.455 106.162 129.486 105.673 131.198C105.433 132.04 104.875 132.67 104.509 133.476C103.578 135.523 102.867 137.564 101.902 139.602C100.797 141.934 99.3951 144.199 98.1052 146.41C96.8316 148.593 95.3114 151.656 93.7011 153.624C91.9694 155.74 90.7519 159.262 89.449 161.723C88.1491 164.178 86.5513 166.502 85.374 168.987C82.6569 174.723 78.8991 179.981 75.9332 185.616C71.5549 193.935 68.4671 202.795 65.3281 211.585C64.736 213.242 64.7095 215.446 63.0501 216.368C61.2108 217.39 59.878 217.507 57.8109 217.507C55.9687 217.507 54.3983 217.298 52.8247 218.216C51.4225 219.034 51.0411 221.232 51.9894 222.418C52.8728 223.522 53.9213 224.605 54.723 225.607C55.6235 226.732 56.0309 228.475 57.1275 229.353C58.0245 230.07 59.2632 232.011 60.5444 232.086C62.2812 232.188 63.9472 232.542 65.7837 232.542C69.7814 232.542 69.5339 229.286 70.9217 226.163C71.7197 224.368 72.3994 222.165 73.6552 220.595C75.1609 218.713 76.7821 215.619 77.5784 213.23C79.0163 208.916 79.9303 204.228 82.1849 200.22C84.1191 196.782 86.564 193.715 88.3353 190.172C89.321 188.201 90.3293 185.449 91.7775 183.794C93.4829 181.845 94.0945 178.885 95.8272 176.96C100.378 171.904 104.603 166.534 108.837 161.242C109.507 160.404 110.97 164.84 111.469 166.026C112.192 167.744 112.439 169.876 112.937 171.746C114.338 176.998 111.756 182.142 111.57 187.337C111.347 193.602 109.748 199.729 109.748 206.118C109.748 211.826 110.396 217.649 111.026 223.314L111.089 223.886C111.617 228.636 112.92 234.727 109.647 238.819C108.71 239.99 108.534 241.602 107.824 243.02C106.532 245.606 107.721 246.209 109.976 246.209C112.018 246.209 114.088 246.306 116.126 246.209C118.191 246.111 120.07 244.89 122.15 244.843C122.696 244.83 125.016 244.574 123.643 243.476C123.045 242.997 122.96 237.976 122.96 237.072V229.201C122.96 225.023 124.327 220.981 124.327 216.824V208.649C124.327 205.748 124.681 202.943 124.782 200.094C124.862 197.865 124.257 195.014 125.01 192.905C125.956 190.256 125.694 186.595 125.694 183.794V174.429C125.694 171.983 125.809 168.076 126.833 165.823L126.843 165.801C127.636 164.055 128.777 161.545 128.883 159.647C128.933 158.739 128.829 157.822 128.883 156.914C128.92 156.283 130.536 156.209 130.68 156.711C131.364 159.106 130.705 162.554 130.705 165.013C130.705 175.25 129.338 184.93 129.338 195.158C129.338 199.874 129.794 204.736 129.794 209.307C129.794 213.061 130.501 216.561 130.705 220.241C130.971 225.031 132.565 230.169 133.894 234.82C134.451 236.769 133.894 238.659 133.894 240.742C133.894 242.738 134.288 243.829 134.78 245.551C135.872 249.373 141.69 247.576 144.373 247.576C148.234 247.576 152.004 247.121 155.762 247.121H161.913C163.646 247.121 160.92 244.64 160.318 244.286C157.176 242.437 153.995 241.555 150.751 239.932C149.551 239.333 148.336 238.971 147.005 238.92C145.818 238.874 146.195 237.529 146.195 236.642C146.195 233.934 146.439 231.107 146.17 228.416C145.539 222.106 145.74 215.724 145.74 209.357V199.537C145.74 197.173 145.42 193.731 146.296 191.539C147.039 189.681 146.429 187.017 147.334 185.388C148.337 183.583 147.112 180.255 148.372 178.681C149.05 177.833 148.473 174.421 148.473 173.315C148.473 172.473 148.085 167.742 148.448 169.012C148.813 170.289 150.466 172.169 151.409 173.113C152.833 174.537 153.52 177.024 154.497 178.782C156.638 182.637 158.862 186.549 161.002 190.4C163.547 194.981 166.407 200.262 168.063 205.232C168.806 207.459 169.95 209.546 170.367 211.838C170.846 214.473 171.785 217.648 173.277 219.886C174.59 221.855 176.693 224.536 178.744 225.708C180.291 226.592 181.136 228.882 182.288 230.163C183.084 231.047 183.465 231.941 184.009 232.997C184.62 234.182 185.143 233.453 186.287 233.453C188.289 233.453 190.052 233.401 191.982 232.972C195.994 232.08 201.803 231.281 205.194 228.644C206.775 227.414 208.585 226.942 207.244 224.594C206.471 223.241 204.598 222.519 203.144 222.519C199.418 222.519 194.446 222.758 191.957 219.557C189.312 216.158 186.267 211.791 185.021 207.586C184.227 204.903 184.35 202.585 183.326 199.967C181.882 196.277 178.964 193.041 177.175 189.463C175.289 185.69 174.098 181.464 172.974 177.415C172.194 174.609 170.593 172.017 169.886 169.19C168.493 163.619 165.394 159.797 162.369 155.092C159.273 150.277 158.407 144.8 156.572 139.5C155.858 137.437 154.732 135.213 153.738 133.223C152.712 131.172 152.655 128.851 151.763 126.845C151.012 125.155 150.854 121.859 150.751 120.011C150.644 118.091 149.84 116.385 149.84 114.316C149.84 109.925 148.473 105.722 148.473 101.332C148.473 97.2464 148.647 93.6066 149.359 89.6893C149.776 87.3974 149.87 85.4634 150.65 83.2098C151.815 79.8441 154.815 77.2084 155.712 73.8449C156.38 71.3406 162.745 72.3108 164.874 71.3644C167.474 70.2092 172.957 71.2632 175.808 71.2632C179.696 71.2632 183.391 70.352 187.401 70.352H198.36H225.695C230.063 70.352 233.572 69.1372 237.649 67.7262L237.667 67.7197C239.984 66.9178 243.236 61.656 243.236 59.4179C243.236 54.8427 238.312 55.3176 235.06 55.3176C232.773 55.3176 230.208 55.5205 228.201 56.5831C226.461 57.5046 225.969 58.0511 223.873 58.0511C215.679 58.0511 207.765 57.1399 199.499 57.1399C196.204 57.1399 192.797 57.276 189.577 57.9499C185.293 58.8467 180.779 58.6309 176.517 59.6457C174.051 60.2328 172.215 60.7847 169.658 60.7847C168.711 60.7847 171.565 59.7143 172.062 59.3167C173.341 58.2939 175.625 57.93 177.175 57.2412C178.729 56.5507 180.52 55.7938 182.187 55.3176C187.952 53.6704 192.965 49.3536 198.816 48.0535C202.746 47.1801 206.731 44.3899 210.889 43.9279C212.489 43.7501 215.073 42.2612 216.584 41.4221C218.069 40.5971 221.285 39.8883 222.177 38.4608C222.995 37.1531 225.449 35.6871 226.834 34.9173C228.577 33.949 230.289 32.8463 232.074 31.8548C235.309 30.0573 237.723 27.6624 236.832 23.6542C236.573 22.4891 234.894 21.0195 233.896 20.465C232.27 19.5618 230.68 20.9742 229.112 21.1484C228.004 21.2716 224.642 23.177 223.747 23.9832C222.457 25.1438 220.847 25.9936 219.317 26.8433C215.882 28.7515 213.472 31.7082 209.623 32.8925C207.784 33.4583 205.69 34.0424 203.802 34.3858C201.931 34.726 200.459 36.4306 198.588 36.6384C193.851 37.1648 190.358 41.4842 185.831 42.1308C181.515 42.7475 177.778 45.1502 173.556 46.2058C167.598 47.6952 162.214 50.7617 155.864 50.7617C152.356 50.7617 148.786 50.5672 145.284 50.7617C144.259 50.8187 141.312 52.0319 141.184 49.8505C141.096 48.3652 142.096 47.1151 143.001 45.9838L143.006 45.978C145.521 42.8346 148.017 41.2701 148.017 36.8662C148.017 33.4947 147.18 30.0809 144.727 27.6279C142.83 25.7304 138.868 23.1294 136.172 22.9708C134.434 22.8685 132.671 22.406 130.705 22.5152C128.544 22.6353 126.338 23.8819 124.099 23.8819C120.419 23.8819 118.359 27.6971 115.468 29.349C113.557 30.4409 111.912 34.8529 111.675 36.8662C111.501 38.3413 111.675 43.1777 111.675 44.839Z')
# shapes = pydiffvg.from_svg_path('M123.075 68.1082C123.075 78.2076 121.445 88.2597 121.445 98.5463C120.746 97.1487 108.941 95.2851 107.313 95.2851C105.443 95.2851 103.778 94.8664 101.998 94.3188C100.48 93.8518 98.3623 94.1456 96.9853 93.5337C94.3547 92.3645 89.5686 92.1855 86.6581 92.0238C82.476 91.7915 78.3314 90.9368 74.1567 90.9368C66.4768 90.9368 58.5807 89.6013 50.9054 89.3061C49.0193 89.2336 47.116 89.3061 45.2284 89.3061C43.2691 89.3061 37.6001 90.3064 36.2299 89.1854C34.3979 87.6865 32.4765 83.847 31.338 81.6966C29.8784 78.9395 27.459 77.6916 25.2383 75.7177C24.1551 74.7549 21.9885 74.2764 21.3128 73C20.9158 72.2501 19.8029 70.2141 19.8029 71.9129C19.8029 74.9344 21.2032 77.7358 21.4335 80.7303C21.7915 85.3841 25.6492 89.5561 25.7819 94.198C25.8614 96.9824 22.4829 97.5981 20.7692 98.969C19.6035 99.9016 16.7306 100.836 15.3338 101.385C13.4212 102.136 11.0201 103.687 9.47571 105.069C7.65708 106.696 3.67883 107.786 8.38864 107.786C11.0704 107.786 14.3399 108.874 17.206 108.874C19.4327 108.874 21.5914 109.417 23.7285 109.417C25.966 109.417 30.4059 110.045 32.3647 110.927C32.7833 111.115 30.0087 118.485 29.7074 119.201C29.2176 120.364 28.5964 122.217 28.4995 123.428C28.376 124.973 27.0333 126.335 26.8689 127.897C26.5583 130.848 24.6948 133.012 24.6948 136.05C24.6948 139.852 26.7057 135.283 27.956 133.876C30.0011 131.575 31.6888 129.056 33.9349 126.81C36.7887 123.957 39.6997 121.347 42.5107 118.536C44.2902 116.757 46.1238 113.083 49.154 114.43C51.4092 115.432 55.3744 116.353 57.8506 116.483C61.3334 116.666 64.7998 118.114 68.2986 118.114H81.5247C83.5911 118.114 83.3969 117.53 83.3969 119.744V124.093C83.3969 130.028 82.3098 135.919 82.3098 142.029C82.3098 145.678 81.7663 149.208 81.7663 152.9C81.7663 155.533 82.4089 159.2 81.3435 161.597C80.3974 163.725 81.2227 167.953 81.2227 170.293C81.2227 173.109 80.6792 176.036 80.6792 178.99C80.6792 185.269 79.5921 191.133 79.5921 197.47C79.5921 200.188 80.3965 204.034 78.3843 206.046C76.5169 207.913 74.9532 210.262 73.0697 212.146C71.2771 213.938 69.2497 215.551 67.5135 217.46C65.6439 219.517 64.2998 222.244 62.3197 224.224C61.5692 224.975 57.8922 228.853 59.602 227.486C61.6536 225.844 65.9155 226.783 68.057 225.07C70.0481 223.477 73.1939 222.473 75.7874 222.473C77.6789 222.473 79.4115 222.025 81.2227 221.929C82.1021 221.883 84.1825 221.641 85.0275 221.265C87.9354 219.973 92.1348 219.755 95.3547 219.755C96.8016 219.755 99.0558 220.431 99.1595 218.668C99.1828 218.271 99.5816 215.287 99.8238 214.984C100.723 213.86 99.7988 212.338 100.367 211.059C100.961 209.723 101.257 208.176 101.334 206.71C101.505 203.463 102.785 200.148 102.964 196.927C103.35 189.985 104.051 183.279 104.051 176.151V165.945C104.051 163.256 105.035 158.102 103.931 155.618C103.372 154.361 103.897 152.707 103.085 151.692C102.704 151.216 101.751 149.639 101.877 149.639C104.63 149.639 107.125 149.095 110.03 149.095C112.833 149.095 115.628 148.552 118.183 148.552C119.718 148.552 120.357 147.29 120.357 149.639V153.987C120.357 161.198 119.27 168.383 119.27 175.729C119.27 181.737 119.052 187.819 118.727 193.665C118.358 200.308 116.37 206.743 116.009 213.233C115.836 216.344 115.466 219.275 115.466 222.473C115.466 223.77 114.884 225.734 116.553 225.734H122.954C124.553 225.734 134.945 227.233 135.033 225.734C135.214 222.664 136.12 219.44 136.12 216.494C136.12 213.497 137.207 210.679 137.207 207.677C137.207 203.198 138.294 198.906 138.294 194.33V163.348V151.269C138.294 149.205 138.404 149.095 140.468 149.095H145.36C147.344 149.095 149.36 148.985 151.339 149.095C152.28 149.148 152.529 151.636 152.849 152.357C154.057 155.074 154.057 158.418 154.057 161.424V161.476C154.057 173.03 154.825 184.779 154.6 196.444C154.531 200.066 150.963 232.257 154.057 232.257C157.485 232.257 160.891 230.81 164.384 230.626C167.039 230.486 169.869 230.415 172.416 229.66C173.801 229.249 176.565 228.53 177.973 228.452C182.111 228.222 186.33 228.452 190.474 228.452C192.614 228.452 188.831 228.116 188.421 227.788C187.316 226.904 185.621 226.894 184.374 225.855C183.038 224.742 180.615 223.84 179.06 223.016C177.09 221.974 175.197 220.131 173.201 219.333C170.691 218.328 167.645 216.481 167.645 213.776C167.645 204.982 167.35 195.957 169.155 187.385C169.871 183.984 169.819 179.413 169.819 175.91C169.819 171.421 170.289 166.993 170.363 162.503C170.468 156.126 172.584 149.031 174.047 142.814C175.575 136.32 173.624 128.462 173.624 121.918C173.624 119.509 170.218 110.633 172.537 110.504C177.608 110.222 182.985 109.115 188.179 108.874C194.791 108.566 201.452 106.336 208.109 106.156C210.125 106.101 214.43 105.187 215.899 106.82C217.489 108.586 218.751 110.556 220.489 112.256C223.079 114.788 226.508 116.234 229.065 118.657C230.055 119.595 231.935 122.49 231.783 119.744C231.696 118.181 229.217 108.984 230.152 108.874C231.503 108.715 233.152 108.124 234.198 107.243C236.045 105.688 239.404 105.825 241.506 104.404C242.871 103.482 244.83 103.066 246.458 102.895C247.176 102.819 247.202 101.851 246.458 101.808C245.394 101.745 243.085 101.577 242.11 101.143C238.467 99.5239 233.34 100.421 229.367 99.5126C227.372 99.0566 224.71 99.8882 225.925 97.4592C226.552 96.2042 227.289 94.9323 227.857 93.6544C228.613 91.9544 228.773 89.9661 229.488 88.2191C230.12 86.6741 230.157 84.9655 231.239 83.6292C231.7 83.0606 232.244 81.891 232.326 81.1531C232.413 80.3714 236.493 70.8258 233.957 70.8258C233.4 70.8258 230.9 72.7051 230.152 73.1208C228.693 73.9315 227.508 75.3004 226.227 76.2612C222.038 79.4029 217.961 83.6513 214.933 87.9775C213.982 89.3366 211.406 93.0049 209.498 93.1109C207.963 93.1962 206.269 92.5674 204.606 92.5674C195.247 92.5674 185.682 90.9368 176.221 90.9368C170.364 90.9368 164.643 89.8497 158.828 89.8497C155.322 89.8497 148.889 90.8576 148.621 86.0449C148.449 82.9347 146.991 79.9369 146.991 76.8048V71.1882C146.991 68.4501 146.933 69.011 148.501 67.4438C149.258 66.6867 150.897 65.5703 151.883 64.9677C153.504 63.9772 154.437 61.6107 155.265 59.9551C157.257 55.9704 159.275 52.0987 161.002 47.9972C162.277 44.9693 161.277 38.4382 160.458 35.2543C159.544 31.6973 157.725 27.8546 156.11 24.6251C151.872 16.1487 143.066 14.8414 134.489 14.8414C127.131 14.8414 120.482 15.2627 113.714 17.6799C109.569 19.1603 106.654 21.1112 103.085 23.538C100.48 25.3093 96.8357 27.7243 95.3547 30.604C93.4264 34.3536 93.1806 37.3086 93.1806 41.4748C93.1806 43.594 94.3387 49.397 95.7775 50.8357C97.6786 52.7369 98.8584 55.5473 100.79 57.479C102.643 59.3321 104.784 60.2148 106.648 61.7065C109.387 63.8977 112.357 64.9754 115.466 66.3568C117.136 67.0993 123.075 66.3106 123.075 68.1082Z')
# shapes = pydiffvg.from_svg_path('M73.3955 174.621C70.8797 174.9 67.593 179.842 66.0527 181.767C63.8232 184.554 61.5788 186.852 60.6732 190.7C59.1723 197.08 58.7082 204.989 60.3984 211.374C60.9942 213.625 62.5434 215.837 62.7936 218.089C62.9748 219.719 64.4374 222.247 65.4637 223.566C67.3844 226.036 68.7795 228.703 71.6285 230.379C73.9372 231.737 76.2041 233.364 78.5394 234.698C81.197 236.217 84.1532 236.465 87.178 236.465C91.2606 236.465 96.1568 235.577 99.9002 233.913C102.88 232.588 106.377 232.399 109.442 231.086C111.219 230.324 113.151 230.033 114.939 229.221C116.12 228.684 117.299 228.095 118.454 227.454C125.004 223.815 129.099 218.532 131.627 211.453C132.904 207.879 132.992 203.987 133.473 200.262C134.018 196.035 134.533 191.994 134.533 187.696C134.533 185.183 134.752 182.69 134.886 180.275C134.978 178.622 135.616 176.7 136.653 175.367C137.766 173.937 138.644 173.977 140.011 173.031C141.776 171.809 144.457 170.851 146.47 170.105C147.609 169.683 148.619 168.944 149.788 168.593C152.019 167.924 154.358 166.846 156.719 166.846C158.539 166.846 161.077 166.336 162.726 167.278C164.796 168.46 166.943 170.016 167.674 172.5C168.142 174.093 168.459 175.748 168.459 177.428C168.459 179.061 169.519 180.478 169.519 182.081C169.519 185.879 168.907 189.439 168.027 193.154C167.082 197.145 165.279 201.002 165.279 205.17C165.279 207.93 166.044 210.292 166.358 212.964C166.907 217.631 168.124 223.073 170.226 227.277C171.6 230.024 173.714 233.96 176.312 235.758C179.01 237.626 182.728 238.586 185.972 238.586C189.326 238.586 191.711 237.058 194.787 236.112C197.836 235.174 201.26 233.942 204.152 232.656C205.711 231.964 207.819 231.578 209.473 231.164C212.093 230.509 214.267 228.877 216.855 228.18C220.234 227.27 224.029 225.714 227.162 224.175C229.101 223.222 230.919 221.725 232.07 219.934C233.743 217.332 234.908 214.54 236.665 212.002C239.544 207.843 241.346 202.904 241.946 197.808C242.129 196.248 241.624 194.441 242.044 192.919C242.666 190.665 242.803 186.959 242.299 184.693C242.042 183.537 240.31 181.954 239.492 181.178C237.721 179.5 235.649 178.159 233.916 176.466C231.419 174.027 229.04 171.947 226.063 170.459C224.624 169.739 223.408 168.72 222.018 167.926C219.737 166.622 217.551 166.026 215.088 165.079C212.487 164.079 209.507 163.924 206.822 163.234C204.901 162.74 202.945 161.271 200.893 161.192C198.711 161.108 196.929 160.02 194.846 159.464C193.355 159.066 192.59 157.836 191.292 156.971C190.151 156.21 189.207 154.426 188.249 153.417C187.136 152.245 186.036 150.784 185.265 149.353C183.959 146.928 183.302 143.844 183.302 141.048C183.302 138.548 183.302 136.048 183.302 133.548C183.302 130.406 184.848 128.287 186.659 125.872C189.405 122.211 192.043 118.653 194.414 114.543C196.835 110.347 199.482 106.54 202.071 102.41C204.285 98.8786 206.493 95.3179 209.296 92.2598C211.999 89.3114 213.611 84.9917 215.736 81.5598C216.611 80.1455 217.502 78.508 217.954 76.9263C218.223 75.9847 219.534 74.6136 220.035 73.7458C221.241 71.6596 222.449 69.5083 223.51 67.3454C225.383 63.5281 226.994 59.3046 229.577 55.86C231.984 52.6509 233.365 47.8737 234.544 44.0408C234.64 43.7285 235.299 40.8406 235.526 40.8406C236.336 40.8406 234.348 41.9632 233.857 42.6076C232.991 43.7447 231.921 44.6827 230.932 45.7097C228.612 48.1186 225.814 50.0489 223.353 52.4242C220.068 55.5967 216.411 58.1537 213.517 61.691C210.912 64.8746 208.466 68.5283 205.566 71.4291C201.237 75.7581 196.614 79.7349 193.001 84.6618C189.51 89.421 185.046 93.3356 181.201 97.7571C178.876 100.431 175.437 101.812 173.132 104.373C171.704 105.96 171.62 106.179 172.209 103.824C173.097 100.273 174.571 96.8264 175.704 93.3396C177.418 88.0651 179.631 83.0306 181.378 77.7902C183.229 72.2362 185.806 66.9895 187.739 61.4947C189.791 55.6636 192.394 49.9468 193.197 43.7267C193.527 41.1711 194.721 38.6992 195.671 36.325C197.085 32.79 198.231 29.2371 198.93 25.4875C199.374 23.1027 200.265 20.7103 200.265 18.2625C200.265 16.2128 200.361 15.4962 198.675 17.1827C193.62 22.2375 189.972 28.6659 185.815 34.4402C182.519 39.0179 180.014 44.0707 176.941 48.8117C174.283 52.9126 171.496 56.7811 168.498 60.6112C167.135 62.353 165.475 63.8355 164.218 65.6569C162.523 68.1157 160.139 69.854 158.034 71.9592C156.204 73.7893 154.552 75.6713 152.87 77.6331C151.12 79.6753 148.976 82.072 146.902 83.7194C145.523 84.8141 143.399 86.556 142.661 88.2154C141.998 89.7079 139.988 91.9291 138.852 93.0648C138.652 93.2653 138.806 91.938 138.852 91.6905C139.075 90.4964 138.989 89.3426 139.147 88.1565C139.544 85.1755 139.481 82.2198 139.481 79.2038C139.481 73.998 140.541 68.8855 140.541 63.6543C140.541 58.4894 140.893 53.1997 140.109 48.1049C139.537 44.388 138.844 40.5979 137.89 36.9729C137.183 34.2844 136.303 31.8054 135.947 29.0215C135.608 26.3723 135.825 23.6138 135.26 21.0701C134.997 19.8894 134.841 18.5134 134.18 17.438C133.391 16.1564 133.826 18.4557 133.826 19.2049C133.826 21.5939 132.382 24.5006 131.549 26.7048C130.68 29.004 130.104 31.4043 129.232 33.6942C126.793 40.0982 126.816 46.7707 125.521 53.3862C124.179 60.2486 123.113 67.3371 121.379 74.0992C120.493 77.5559 119.597 81.1174 118.984 84.6422C118.54 87.193 118.339 89.9885 117.747 92.4758C116.758 96.628 117.278 101.102 115.803 105.159C115.117 107.045 113.333 102.696 112.701 101.821C111.556 100.235 109.986 98.4624 109.089 96.7165C107 92.6556 105.264 88.2656 103.591 84.0335C101.696 79.2405 97.6818 75.4496 94.776 71.2524C92.4481 67.8898 90.0724 64.4331 87.8651 60.9842C87.0271 59.6749 86.4586 58.2469 85.5877 56.9594C84.9031 55.9475 83.676 55.1306 83.2121 54.0341C82.7357 52.9082 80.8865 50.7142 80.0315 49.7934C78.0864 47.6986 76.8626 45.2949 74.6324 43.5107C74.3153 43.257 73.959 43.0616 74.1416 43.7463C74.715 45.8967 75.8719 48.0569 76.7331 50.1075C77.8319 52.7236 79.1472 55.157 80.11 57.8429C82.3378 64.0573 84.5185 70.3139 86.3141 76.6515C88.1412 83.1001 91.7208 88.4021 94.403 94.498C96.7726 99.8836 96.8842 105.87 100.607 110.656C101.814 112.208 102.297 114.584 102.806 116.467C103.081 117.485 103.445 118.7 103.945 119.628C104.178 120.062 105.131 120.684 104.691 120.905C103.648 121.426 101.887 121.455 100.725 121.886C99.5437 122.325 98.3919 122.665 97.1909 123.045C95.1676 123.683 92.4834 123.969 90.869 125.499C89.8267 126.486 88.2415 127.393 86.9816 128.149C85.0249 129.323 82.0919 131.343 79.8941 131.86C77.0226 132.535 74.1163 133.643 71.3537 134.687C69.2521 135.481 67.3461 135.337 65.2674 135.826C61.174 136.789 56.8951 137.125 52.7022 137.887C47.3438 138.861 41.8011 138.574 36.2889 138.574C32.9086 138.574 30.7671 138.282 28.5142 135.747C26.6739 133.677 26.0404 129.696 26.0404 127.069C26.0404 123.799 26.0145 120.582 26.4134 117.39C26.6056 115.853 27.1441 114.186 27.8074 112.776C28.3797 111.56 29.3706 110.566 29.8492 109.321C30.8911 106.612 34.6729 102.082 37.5258 101.448C41.0322 100.669 43.9173 99.7008 47.5976 99.7008C52.0881 99.7008 58.1842 102.547 59.24 107.299C59.97 110.584 57.0968 112.431 55.1956 114.543C54.3781 115.452 53.3069 116.214 52.1917 116.742C51.4325 117.102 49.4622 118.03 48.6578 118.077C46.0242 118.232 51.6515 119.265 52.4862 119.648C54.1132 120.394 55.8128 120.198 57.5712 120.198C61.0067 120.198 64.5136 118.517 66.8773 116.153C68.1311 114.9 69.3301 114.107 69.9401 112.345C70.4646 110.829 70.8524 109.254 71.3537 107.75C72.6228 103.943 72.6887 100.19 72.6887 96.1864C72.6887 94.0814 70.4828 92.2563 68.8014 91.4156C67.4832 90.7565 66.5019 89.735 65.2674 89.0203C63.6099 88.0607 62.0277 86.9075 60.3984 85.9183C53.5326 81.7498 44.9499 80.283 37.1724 82.0113C31.0826 83.3646 25.3699 88.7092 21.0928 92.9862C16.4712 97.6079 12.4462 104.233 12.2579 111.009C12.1517 114.833 11.1977 118.615 11.1977 122.475C11.1977 126.334 11.1094 130.182 11.5315 133.98C12.0007 138.203 14.1147 141.794 15.517 145.721C17.2877 150.679 20.8104 154.548 24.4697 158.208C27.2973 161.035 29.5576 164.356 32.4015 167.199C34.758 169.556 37.8613 171.077 40.9616 172.226C44.8452 173.664 49.1449 173.03 53.2323 173.541C54.7019 173.725 72.5289 176.354 73.3955 174.621Z')
# shapes = pydiffvg.from_svg_path('M32.9889 62.9719C33.8803 62.2587 37.1384 62.8521 38.2603 62.8521C39.9275 62.8521 42.5699 64.3427 43.921 65.2781C46.5331 67.0865 47.1206 66.4735 49.3122 64.7689C52.2835 62.458 57.0173 63.1169 60.3641 64.8887C64.8573 67.2675 70.6197 68.6762 74.1116 72.5562C75.4472 74.0402 77.0163 80.8528 74.0817 81.6912C70.1456 82.8159 67.8241 78.6399 66.1746 75.7909C64.5635 73.0081 57.944 70.3789 56.6203 75.0122C56.186 76.5322 58.3561 77.8562 59.2859 78.786C61.004 80.5041 61.9416 82.4601 63.2993 84.5366C65.9212 88.5465 70.5579 92.1803 74.501 94.8996C76.8413 96.5136 79.4277 98.9027 81.1202 101.159C81.7728 102.03 82.1045 102.701 82.8873 103.406C83.4094 103.876 84.2229 103.593 84.6244 104.095C85.3692 105.026 93.973 104.903 95.5266 104.903C107.018 104.903 118.874 105.442 130.629 105.442C137.601 105.442 145.444 104.564 152.134 106.64C155.281 107.617 158.623 108.106 161.898 108.557C166.773 109.23 171.902 108.484 176.694 109.336C182.395 110.35 187.124 110.784 192.149 113.799C195.206 115.633 202.049 112.359 205.237 111.163C210.249 109.283 214.663 106.259 219.404 103.825C222.344 102.316 224.867 100.087 227.76 98.4339C229.529 97.4231 231.316 96.3432 233.002 95.1991C234.763 94.004 236.097 91.7338 238.004 90.8862C239.553 90.1975 246.104 84.1819 247.857 86.1539C249.721 88.2501 238.734 94.8182 237.614 95.8581C231.828 101.231 225.296 105.652 219.374 110.834C215.192 114.493 208.598 114.757 203.889 117.842C202.774 118.573 200.15 119.018 200.655 120.657C200.952 121.625 201.37 122.518 201.643 123.473C202.031 124.83 203.23 126.284 203.23 127.846C203.23 130.209 204.309 132.174 204.309 134.555V141.833V155.58C204.309 159.44 208.487 164.551 210.479 167.681C212.55 170.935 216.497 176.568 216.708 180.38C216.953 184.776 217.247 189.311 217.247 193.858C217.247 197.075 217.896 206.257 213.204 206.257C209.109 206.257 204.927 208.222 200.804 207.306C196.032 206.245 203.34 201.316 204.309 200.746C207.489 198.875 204.613 194.442 204.309 191.701C203.859 187.657 200.983 184.683 199.457 181.248C197.639 177.159 193.375 172.863 190.292 169.597C188.364 167.556 187.129 164.606 185.41 162.349C183.781 160.212 181.481 158.539 179.809 156.389C178.819 155.116 177.822 153.345 177.053 151.807C175.815 149.33 173.914 147.732 172.261 145.607C169.56 142.134 159.684 150.184 156.986 151.148C150.162 153.585 143.325 157.737 136.05 158.815C132.422 159.353 129.008 160.432 125.358 160.432C121.099 160.432 116.893 159.97 112.659 159.893C106.719 159.785 101.385 158.283 96.3652 155.341C94.0824 154.003 91.085 151.823 89.7461 154.233C89.1296 155.342 89.1983 157.844 88.9673 159.115C88.3804 162.343 86.4479 164.79 85.2834 167.86C84.2199 170.664 84.0863 173.608 83.0071 176.426C81.1455 181.287 79.5714 186.476 78.4545 191.581C77.7469 194.816 78.1684 199.263 76.7773 202.244C75.6972 204.558 75.6133 207.875 72.4943 207.875H67.6422C64.6589 207.875 61.3678 208.381 59.9448 205.179C58.4206 201.75 63.3346 200.31 65.2162 199.369C67.0885 198.433 68.4509 197.739 68.4509 195.206C68.4509 194.506 69.2844 191.034 69.7987 190.623C72.3659 188.569 70.0683 179.776 70.0683 176.606C70.0683 172.714 67.7341 169.079 67.3727 165.284C66.7921 159.189 62.5068 153.982 60.6037 148.272C59.2278 144.144 58.6635 139.884 56.7101 136.172C55.1244 133.159 53.5799 129.741 52.2774 126.588C50.7496 122.889 50.3106 119.055 48.803 115.326C46.3716 109.312 42.3952 93.7906 32.8691 98.5537C28.9248 100.526 24.6647 102.208 20.1699 102.208C18.6395 102.208 16.5412 102.623 15.3478 101.669C14.5278 101.013 13.3889 99.1048 12.143 100.351C11.6062 100.888 10.9608 104.32 9.26772 102.627C8.21123 101.57 10.0236 98.9359 10.6455 98.314C12.2523 96.7073 12.9068 95.7383 15.3478 95.7383C15.9868 95.7383 20.5942 94.4261 19.6308 94.1509C15.6469 93.0126 10.1917 95.8185 6.87164 93.1625C3.91865 90.8001 3.90228 90.2041 6.87164 87.5317C9.68064 85.0036 13.1257 83.8048 16.6956 82.5299C19.9512 81.3671 25.8606 80.5731 25.8606 76.33C25.8606 73.4324 26.2226 67.1883 29.0953 65.6675C30.509 64.919 31.6748 64.0232 32.9889 62.9719Z')



path_group = pydiffvg.ShapeGroup(shape_ids = torch.tensor([0]),
                                 fill_color = torch.tensor([0.5, 0.5, 0.5, 1.0]))
shape_groups = [path_group]
scene_args = pydiffvg.RenderFunction.serialize_scene(\
    canvas_width, canvas_height, shapes, shape_groups)

render = pydiffvg.RenderFunction.apply
img = render(canvas_width, # width
             canvas_height, # height
             2,   # num_samples_x
             2,   # num_samples_y
             0,   # seed
             None, # background_image
             *scene_args)
# The output image is in linear RGB space. Do Gamma correction before saving the image.
target_on_bg = blend(img, torch.full(img.size(), 1.0))
pydiffvg.imwrite(target_on_bg.cpu(), 'results/human/target.png', gamma=2.2)
target = img.clone()
target_a = torch.flatten(target)[3::4]

class Point:
    def __init__(self, x, y, parent=None):
        point = torch.tensor([x, y])
        self.point_n = point.clone() / 256
        self.point_n.requires_grad = True
        self.parent = parent
        self.mag = None
        self.type = 'line'
        if self.parent is not None:
            with torch.no_grad():
                self.mag = torch.norm(self.point_n)

    def full_mag(self):
        return torch.norm(self.point() - self.parent.point())

    def point(self):
        point = self.point_n * 256
        if self.parent is not None:
            point += self.parent.point()
        return point

    def enforce_constraints(self):
        if self.mag is not None:
            with torch.no_grad():
                self.point_n = self.point_n / torch.norm(self.point_n) * self.mag

class Stickman:
    def __init__(self):
        scale = 0.5
        self.root = Point(128, 128)
        self.neck = Point(0*scale, -80*scale, self.root)
        self.head = Point(0*scale, -50*scale, self.neck)
        self.head.type = 'circle'
        self.armTopLeft = Point(-50*scale, 25*scale, self.neck)
        self.armBottomLeft = Point(-25*scale, 50*scale, self.armTopLeft)
        self.armTopRight = Point(50*scale, 25*scale, self.neck)
        self.armBottomRight = Point(25*scale, 50*scale, self.armTopRight)
        self.legTopLeft = Point(-20*scale, 80*scale, self.root)
        self.legBottomLeft = Point(-10*scale, 80*scale, self.legTopLeft)
        self.legTopRight = Point(20*scale, 80*scale, self.root)
        self.legBottomRight = Point(10*scale, 80*scale, self.legTopRight)
        self.points = [
            self.root,
            self.neck,
            self.armTopLeft,
            self.armTopRight,
            self.armBottomLeft,
            self.armBottomRight,
            self.legTopLeft,
            self.legTopRight,
            self.legBottomLeft,
            self.legBottomRight,
            self.head
        ]

    def to_optimize(self):
        return list(map(lambda point: point.point_n, self.points))

    def render(self, blur_radius=1.0):
        shapes = []
        groups = []
        for point in self.points:
            if point.parent is not None and point.type == 'line':
                shapes.append(pydiffvg.Path(num_control_points=torch.tensor([0]),
                                            points = torch.stack([point.parent.point(), point.point()]),
                                            is_closed = False,
                                            stroke_width = torch.tensor(5.0)))
                groups.append(pydiffvg.ShapeGroup(shape_ids=torch.tensor([len(groups)]),
                                                  stroke_color=torch.tensor([0.0, 0.0, 0.0, 1.0]),
                                                  fill_color=None))
            if point.parent is not None and point.type == 'circle':
                shapes.append(pydiffvg.Circle(radius=point.full_mag()*0.5,
                                              center=(point.point() + point.parent.point())*0.5,
                                              stroke_width = torch.tensor(5.0)))
                groups.append(pydiffvg.ShapeGroup(shape_ids=torch.tensor([len(groups)]),
                                                  stroke_color=torch.tensor([0.0, 0.0, 0.0, 1.0]),
                                                  fill_color=torch.tensor([1.0, 1.0, 1.0, 1.0])))
        scene_args = pydiffvg.RenderFunction.serialize_scene(\
            canvas_width, canvas_height, shapes, groups,
            filter = pydiffvg.PixelFilter(type = diffvg.FilterType.box, radius = torch.tensor(blur_radius)))
        render = pydiffvg.RenderFunction.apply
        return render(canvas_width, canvas_height, 2, 2, 0, None, *scene_args)

    def enforce_constraints(self):
        for point in self.points:
            point.enforce_constraints()


stickman = Stickman()
img = stickman.render()
pydiffvg.imwrite(img.cpu(), 'results/human/init.png', gamma=2.2)

# Optimize
optimizer = torch.optim.Adam(stickman.to_optimize(), lr=1e-2)
# Run 100 Adam iterations.
for t in range(100):
    print('iteration:', t)
    optimizer.zero_grad()

    img = stickman.render((1.0 - t / 100.0) * 5.0 + 1.0)

    composite = blend(img, target_on_bg)

    img_a = torch.flatten(img)[3::4]

    # Save the intermediate render.
    pydiffvg.imwrite(composite.cpu(), 'results/human/iter_{:02}.png'.format(t), gamma=2.2)

    loss = (img_a - target_a).pow(2).sum()

    print('loss:', loss.item())

    # Backpropagate the gradients.
    loss.backward()
    # Print the gradients
    # print('points_n.grad:', points_n.grad)

    # Take a gradient descent step.
    optimizer.step()
    # stickman.enforce_constraints()
    # Print the current params.
    # print('points:', shapes[0].points)

# Render the final result.
img = stickman.render()
# Save the images and differences.
pydiffvg.imwrite(img.cpu(), 'results/human/final.png')

# Convert the intermediate renderings to a video.
from subprocess import call
call(["ffmpeg", "-framerate", "20", "-i",
    "results/human/iter_%02d.png", "-crf", "18",
    "results/human/out.mp4"])
